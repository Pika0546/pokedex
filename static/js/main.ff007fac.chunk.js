(this.webpackJsonppokedex=this.webpackJsonppokedex||[]).push([[0],{11:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(20),s=n.n(o),i=n(4),r=(n(11),n(2)),l=n(10),d=function(e,t){if("FETCH_DATA"===t.type){var n=!1;t.payload.nextUrl||(n=!0);var a=[].concat(Object(l.a)(e.data),Object(l.a)(t.payload.pokemons));return Object(r.a)(Object(r.a)({},e),{},{data:a,isLoading:!1,nextUrl:t.payload.nextUrl,isOver:n,isError:!1,isLoadMore:!1,types:t.payload.typeList})}return"RESET_POKEMONS"===t.type?Object(r.a)(Object(r.a)({},e),{},{filterResult:null,isLoading:!1,isSearching:!1,isError:!1,isLoadMore:!1}):"FILTERING"===t.type?Object(r.a)(Object(r.a)({},e),{},{filterResult:[t.payload],isSearching:!1,isError:!1}):"SEARCHING"===t.type?Object(r.a)(Object(r.a)({},e),{},{filterResult:[],isSearching:!0}):"START_LOAD"===t.type?Object(r.a)(Object(r.a)({},e),{},{isLoadMore:!0}):"NOT_FOUND"===t.type?Object(r.a)(Object(r.a)({},e),{},{filterResult:[],isSearching:!1,isError:!0}):"SET_DETAIL"===t.type?Object(r.a)(Object(r.a)({},e),{},{isOpenPokedex:!0,pokeDetail:t.payload}):Object(r.a)({},e)},u=n(5),m=n.n(u),j=(n(44),n(45),n(0)),p=function(e){var t=e.type;return Object(j.jsx)("div",{className:"badge badge--".concat(t),children:t})},f=function(e){var t=e.pokemon,n=e.showDetail,a=t.types.map((function(e,t){return Object(j.jsx)(p,{type:e},t)}));return Object(j.jsxs)("div",{className:"card",onClick:function(){n(t)},children:[Object(j.jsx)("div",{className:"card__img",children:Object(j.jsx)("img",{src:t.img,alt:t.name})}),Object(j.jsx)("span",{className:"card__id",children:"#".concat(t.id)}),Object(j.jsx)("h3",{className:"card__title",children:t.name}),Object(j.jsx)("div",{className:"card__types",children:a})]})},b=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),c=n[0],o=n[1],s=function(){console.log(window.innerHeight),console.log(document.documentElement.scrollTop),console.log(document.documentElement.offsetHeight),console.log(window.innerHeight+document.documentElement.scrollTop),window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight&&(console.log("Scroll"),o(!0))};return Object(a.useEffect)((function(){return document.addEventListener("scroll",s),function(){document.removeEventListener("scroll",s)}}),[]),Object(a.useEffect)((function(){c&&e()}),[c]),[c,o]},O=(n(47),n(48),function(e){var t=e.className;return Object(j.jsx)("div",{className:"loading loading--".concat(t),children:Object(j.jsxs)("div",{className:"pokeball",children:[Object(j.jsx)("div",{className:"pokeball__top"}),Object(j.jsx)("div",{className:"pokeball__bottom"}),Object(j.jsx)("div",{className:"pokeball__line"}),Object(j.jsx)("div",{className:"pokeball__middle"})]})})}),h=function(e){var t=e.pokeList,n=e.fetchData,a=e.isOver,c=e.isLoadMore,o=e.showDetail,s=b((function(){a||n(),l(!1)})),r=Object(i.a)(s,2),l=(r[0],r[1]),d=t.map((function(e){return Object(j.jsx)(f,{showDetail:o,pokemon:e},e.id)}));return Object(j.jsxs)("div",{className:"dictionary",children:[Object(j.jsx)("div",{className:"dictionary__content",children:d}),Object(j.jsx)("div",{className:"dictionary__row",children:c&&!a?Object(j.jsx)(O,{className:"small"}):""})]})},x=(n(49),n.p+"static/media/pokemon.c12eb752.png"),g=function(){return Object(j.jsx)("div",{className:"header",children:Object(j.jsx)("img",{src:x,alt:"Pokemon",onClick:function(){window.location.reload(!1)}})})},v=(n(50),function(e){var t=e.getFilter,n=Object(a.useRef)(null);return Object(j.jsx)("div",{className:"search",children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(n.current.value.toLowerCase())},children:[Object(j.jsx)("input",{className:"search__input",type:"text",placeholder:"Id or name",ref:n}),Object(j.jsx)("button",{className:"search__button",type:"submit",children:Object(j.jsx)("i",{className:"fas fa-search"})})]})})}),_=(n(51),n.p+"static/media/pokeballOpen.1dac896f.png"),y=function(){return Object(j.jsx)("div",{className:"err",children:Object(j.jsxs)("div",{className:"err__content",children:[Object(j.jsx)("div",{className:"err__img",children:Object(j.jsx)("img",{src:_,alt:"Pokeball"})}),Object(j.jsx)("div",{className:"err__text",children:Object(j.jsx)("h2",{children:"POKEMON NOT FOUND!"})})]})})},E=(n(52),function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],o=function(){document.body.scrollTop>20||document.documentElement.scrollTop>20?c(!0):c(!1)};return Object(a.useEffect)((function(){return document.addEventListener("scroll",o),function(){document.removeEventListener("scroll",o)}}),[]),Object(j.jsx)(j.Fragment,{children:n?Object(j.jsx)("button",{className:"scroll-top",onClick:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},children:Object(j.jsx)("i",{class:"fas fa-angle-double-up"})}):""})}),N="https://pokeapi.co/api/v2/pokemon/",k={filterResult:null,isLoading:!0,data:[],types:[],nextUrl:N,isOver:!1,isSearching:!1,isLoadMore:!0,isError:!1,isOpenPokedex:!1,pokeDetail:null};var T=function(){var e=Object(a.useReducer)(d,k),t=Object(i.a)(e,2),n=t[0],c=t[1],o=function(){n.filterResult||(c({type:"START_LOAD"}),m.a.get(n.nextUrl).then((function(e){var t=e.data,a=t.results.map((function(e){return m.a.get(e.url)}));Promise.all(a).then((function(e){var a=e.map((function(e){var t=e.data.types.map((function(e){return e.type.name}));return{id:e.data.id,name:e.data.name,types:t,img:e.data.sprites.front_default}}));0===n.types.length?m.a.get("https://pokeapi.co/api/v2/type/").then((function(e){var n=e.data.results.map((function(e){return m.a.get(e.url)}));Promise.all(n).then((function(e){var n=e.map((function(e){var t=[],n=[];return e.data.damage_relations.double_damage_from.forEach((function(e){t.push(e.name)})),e.data.damage_relations.no_damage_to.forEach((function(e){t.push(e.name)})),e.data.damage_relations.double_damage_to.forEach((function(e){n.push(e.name)})),e.data.damage_relations.no_damage_from.forEach((function(e){n.push(e.name)})),{name:e.data.name,dis:t,ad:n}}));c({type:"FETCH_DATA",payload:{pokemons:a,nextUrl:t.next,typeList:n}})}))})):c({type:"FETCH_DATA",payload:{pokemons:a,nextUrl:t.next,typeList:n.types}})})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)})))};return Object(a.useEffect)((function(){return o(),function(){}}),[]),Object(j.jsxs)("div",{className:"app",children:[Object(j.jsx)(E,{}),n.isLoading?Object(j.jsx)(O,{className:"big"}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(g,{}),Object(j.jsx)(v,{getFilter:function(e){c({type:"SEARCHING"}),setTimeout((function(){0===e.length?c({type:"RESET_POKEMONS"}):m.a.get(N+e).then((function(e){var t=e.data,n=t.types.map((function(e){return e.type.name})),a={id:t.id,name:t.name,types:n,img:t.sprites.front_default};c({type:"FILTERING",payload:a})})).catch((function(e){c({type:"NOT_FOUND"})}))}),1e3)}}),Object(j.jsx)("main",{children:Object(j.jsx)("div",{className:"main",children:n.isSearching?Object(j.jsx)(O,{className:"small"}):n.isError?Object(j.jsx)(y,{}):Object(j.jsx)(h,{isOver:!!n.filterResult||n.isOver,pokeList:n.filterResult?n.filterResult:n.data,fetchData:o,isLoadMore:n.isLoadMore,showDetail:function(e){c({type:"SET_DETAIL",payload:e})}})})})]})]})};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(T,{})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.ff007fac.chunk.js.map
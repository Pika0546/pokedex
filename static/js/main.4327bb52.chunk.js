(this.webpackJsonppokedex=this.webpackJsonppokedex||[]).push([[0],{11:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(20),i=a.n(s),r=a(4),o=(a(11),a(2)),l=a(10),d=function(e,t){if("FETCH_DATA"===t.type){var a=!1;t.payload.nextUrl||(a=!0);var n=[].concat(Object(l.a)(e.data),Object(l.a)(t.payload.pokemons));return Object(o.a)(Object(o.a)({},e),{},{data:n,isLoading:!1,nextUrl:t.payload.nextUrl,isOver:a,isError:!1,isLoadMore:!1,types:t.payload.typeList})}return"RESET_POKEMONS"===t.type?Object(o.a)(Object(o.a)({},e),{},{filterResult:null,isLoading:!1,isSearching:!1,isError:!1,isLoadMore:!1}):"FILTERING"===t.type?Object(o.a)(Object(o.a)({},e),{},{filterResult:[t.payload],isSearching:!1,isError:!1}):"SEARCHING"===t.type?Object(o.a)(Object(o.a)({},e),{},{filterResult:[],isSearching:!0}):"START_LOAD"===t.type?Object(o.a)(Object(o.a)({},e),{},{isLoadMore:!0}):"NOT_FOUND"===t.type?Object(o.a)(Object(o.a)({},e),{},{filterResult:[],isSearching:!1,isError:!0}):"SET_DETAIL"===t.type?Object(o.a)(Object(o.a)({},e),{},{isOpenPokedex:!0,pokeDetail:t.payload}):Object(o.a)({},e)},u=a(5),j=a.n(u),p=(a(44),a(45),a(0)),m=function(e){var t=e.type;return Object(p.jsx)("div",{className:"badge badge--".concat(t),children:t})},O=function(e){var t=e.pokemon,a=e.showDetail,n=t.types.map((function(e,t){return Object(p.jsx)(m,{type:e},t)}));return Object(p.jsxs)("div",{className:"card",onClick:function(){a(t)},children:[Object(p.jsx)("div",{className:"card__img",children:Object(p.jsx)("img",{src:t.img,alt:t.name})}),Object(p.jsx)("span",{className:"card__id",children:"#".concat(t.id)}),Object(p.jsx)("h3",{className:"card__title",children:t.name}),Object(p.jsx)("div",{className:"card__types",children:n})]})},b=function(e){var t=Object(n.useState)(!1),a=Object(r.a)(t,2),c=a[0],s=a[1],i=function(){window.innerHeight+document.documentElement.scrollTop===document.documentElement.offsetHeight&&s(!0)};return Object(n.useEffect)((function(){return document.addEventListener("scroll",i),function(){document.removeEventListener("scroll",i)}}),[]),Object(n.useEffect)((function(){c&&e()}),[c]),[c,s]},f=(a(47),a(48),function(e){var t=e.className;return Object(p.jsx)("div",{className:"loading loading--".concat(t),children:Object(p.jsxs)("div",{className:"pokeball",children:[Object(p.jsx)("div",{className:"pokeball__top"}),Object(p.jsx)("div",{className:"pokeball__bottom"}),Object(p.jsx)("div",{className:"pokeball__line"}),Object(p.jsx)("div",{className:"pokeball__middle"})]})})}),h=function(e){var t=e.pokeList,a=e.fetchData,n=e.isOver,c=e.isLoadMore,s=e.showDetail,i=b((function(){n||a(),l(!1)})),o=Object(r.a)(i,2),l=(o[0],o[1]),d=t.map((function(e){return Object(p.jsx)(O,{showDetail:s,pokemon:e},e.id)}));return Object(p.jsxs)("div",{className:"dictionary",children:[Object(p.jsx)("div",{className:"dictionary__content",children:d}),Object(p.jsx)("div",{className:"dictionary__row",children:c&&!n?Object(p.jsx)(f,{className:"small"}):""})]})},x=(a(49),a.p+"static/media/pokemon.c12eb752.png"),_=function(){return Object(p.jsx)("div",{className:"header",children:Object(p.jsx)("img",{src:x,alt:"Pokemon",onClick:function(){window.location.reload(!1)}})})},v=(a(50),function(e){var t=e.getFilter,a=Object(n.useRef)(null);return Object(p.jsx)("div",{className:"search",children:Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(a.current.value.toLowerCase())},children:[Object(p.jsx)("input",{className:"search__input",type:"text",placeholder:"Id or name",ref:a}),Object(p.jsx)("button",{className:"search__button",type:"submit",children:Object(p.jsx)("i",{className:"fas fa-search"})})]})})}),y=(a(51),a.p+"static/media/pokeballOpen.1dac896f.png"),g=function(){return Object(p.jsx)("div",{className:"err",children:Object(p.jsxs)("div",{className:"err__content",children:[Object(p.jsx)("div",{className:"err__img",children:Object(p.jsx)("img",{src:y,alt:"Pokeball"})}),Object(p.jsx)("div",{className:"err__text",children:Object(p.jsx)("h2",{children:"POKEMON NOT FOUND!"})})]})})},N="https://pokeapi.co/api/v2/pokemon/",E={filterResult:null,isLoading:!0,data:[],types:[],nextUrl:N,isOver:!1,isSearching:!1,isLoadMore:!0,isError:!1,isOpenPokedex:!1,pokeDetail:null};var k=function(){var e=Object(n.useReducer)(d,E),t=Object(r.a)(e,2),a=t[0],c=t[1],s=function(){a.filterResult||(c({type:"START_LOAD"}),j.a.get(a.nextUrl).then((function(e){var t=e.data,n=t.results.map((function(e){return j.a.get(e.url)}));Promise.all(n).then((function(e){var n=e.map((function(e){var t=e.data.types.map((function(e){return e.type.name}));return{id:e.data.id,name:e.data.name,types:t,img:e.data.sprites.front_default}}));0===a.types.length?j.a.get("https://pokeapi.co/api/v2/type/").then((function(e){var a=e.data.results.map((function(e){return j.a.get(e.url)}));Promise.all(a).then((function(e){var a=e.map((function(e){var t=[],a=[];return e.data.damage_relations.double_damage_from.forEach((function(e){t.push(e.name)})),e.data.damage_relations.no_damage_to.forEach((function(e){t.push(e.name)})),e.data.damage_relations.double_damage_to.forEach((function(e){a.push(e.name)})),e.data.damage_relations.no_damage_from.forEach((function(e){a.push(e.name)})),{name:e.data.name,dis:t,ad:a}}));c({type:"FETCH_DATA",payload:{pokemons:n,nextUrl:t.next,typeList:a}})}))})):c({type:"FETCH_DATA",payload:{pokemons:n,nextUrl:t.next,typeList:a.types}})})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)})))};return Object(n.useEffect)((function(){return s(),function(){}}),[]),Object(p.jsx)("div",{className:"app",children:a.isLoading?Object(p.jsx)(f,{className:"big"}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(_,{}),Object(p.jsx)(v,{getFilter:function(e){c({type:"SEARCHING"}),setTimeout((function(){0===e.length?c({type:"RESET_POKEMONS"}):j.a.get(N+e).then((function(e){var t=e.data,a=t.types.map((function(e){return e.type.name})),n={id:t.id,name:t.name,types:a,img:t.sprites.front_default};c({type:"FILTERING",payload:n})})).catch((function(e){c({type:"NOT_FOUND"})}))}),1e3)}}),Object(p.jsx)("main",{children:Object(p.jsx)("div",{className:"main",children:a.isSearching?Object(p.jsx)(f,{className:"small"}):a.isError?Object(p.jsx)(g,{}):Object(p.jsx)(h,{isOver:!!a.filterResult||a.isOver,pokeList:a.filterResult?a.filterResult:a.data,fetchData:s,isLoadMore:a.isLoadMore,showDetail:function(e){c({type:"SET_DETAIL",payload:e})}})})})]})})};i.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(k,{})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.4327bb52.chunk.js.map